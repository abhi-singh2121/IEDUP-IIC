<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login â€¢ IEDUP</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background: #f5f5f5; display: flex; justify-content: center; align-items: center; height: 100vh; }
.login-box { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
</style>
</head>
<body>
<div class="login-box">
  <h3 class="text-center mb-4">Admin Login</h3>
  <form id="loginForm">
    <div class="mb-3">
      <input type="text" class="form-control" placeholder="Username" required>
    </div>
    <div class="mb-3">
      <input type="password" class="form-control" placeholder="Password" required>
    </div>
    <button type="submit" class="btn btn-primary w-100">Login</button>
  </form>
</div>

<script>
const loginForm = document.getElementById("loginForm");
loginForm.addEventListener("submit", async function(e) {
  e.preventDefault();
 const username = this.querySelector("input[placeholder='Username']").value;
  const password = this.querySelector("input[type='password']").value;

  try {
    const res = await fetch("/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password })

    });
    const data = await res.json();
    if (data.success) {
      localStorage.setItem("token", data.token);
      localStorage.setItem("role", data.role);
      localStorage.setItem("name", data.name);
      window.location.href = "admin-dashboard.html";
    } else {
      alert(data.message);
    }
  } catch (err) {
    console.error(err);
    alert("Login failed!");
  }
});
</script>
</body>
</html>
